# Task mate システム仕様書 v2.0

## 1. システム概要

### 1.1 基本情報
- **システム名**: Task mate
- **バージョン**: 2.0.0
- **提供形態**: LINE Bot アプリケーション
- **LINE Bot ID**: @  （※実際のIDは環境により異なります）
- **主要機能**: Google Apps Script (GAS) コードの自動生成
- **対象ユーザー**: プログラミング未経験者〜中級者
- **公式サイト**: https://gasgenerator.onrender.com

### 1.2 システムの目的
本システムは、プログラミング知識がない方でも、自然言語での要望を伝えるだけで、業務自動化のためのGoogle Apps Scriptコードを自動生成することを目的としています。Excelマクロのようなスプレッドシートのデータ処理、Gmail連携、カレンダー自動化など、様々な業務効率化を実現します。

### 1.3 技術スタック
- **フロントエンド**: Next.js 14 (App Router)
- **バックエンド**: Next.js API Routes (Node.js)
- **データベース**: Supabase (PostgreSQL)
- **AI処理**: Claude 3.5 Sonnet (Anthropic API)
- **画像解析**: Claude Vision API
- **決済システム**: Stripe
- **インフラ**: Render.com
- **メッセージング**: LINE Messaging API

### 1.4 システム要件
#### クライアント要件
- **対応OS**: iOS 12.0以降、Android 5.0以降
- **必須アプリ**: LINE（最新版推奨）
- **ブラウザ**: Chrome 90+、Safari 14+、Edge 90+（共有リンク閲覧用）
- **ネットワーク**: 安定したインターネット接続（4G/5G/Wi-Fi推奨）
- **画像アップロード**: 最大10MB、JPEG/PNG形式

#### 処理制限
- **テキスト入力**: 最大2000文字/メッセージ
- **コード生成時間**: 通常30秒〜3分（混雑時は最大5分）
- **セッションタイムアウト**: 30分（無操作時）
- **同時処理数**: 1ユーザーあたり1リクエスト
- **API制限**: 1分あたり10リクエスト/ユーザー

---

## 2. 主要機能

### 2.1 コード自動生成機能

#### 2.1.1 対話型要件収集
- ユーザーとの自然な会話を通じて、実現したい処理の要件を段階的に収集
- AIが質問を投げかけながら、必要な情報を漏れなく収集
- 曖昧な要望も、AIが適切に解釈して具体的な仕様に変換

#### 2.1.2 カテゴリ別コード生成
**スプレッドシート操作**
- データの読み取り、書き込み、編集
- 複数シート間でのデータ転記
- 条件に基づくデータフィルタリング
- 売上集計、在庫管理などのビジネスロジック実装
- グラフやチャートの自動生成
- PDFエクスポート機能

**Gmail自動化**
- 条件に基づく自動返信システム
- 添付ファイルの自動保存・処理
- メーリングリストへの一斉送信
- メール内容のスプレッドシート転記
- 定期的なレポートメール送信
- テンプレートを使った動的メール生成

**カレンダー連携**
- スプレッドシートからの予定一括登録
- 定期的な予定の自動作成
- 参加者への自動通知・リマインダー
- 会議室予約システムの構築
- イベント情報の集計とレポート化

**API連携**
- Slack、LINE、ChatWorkなどのチャットツール連携
- 外部データベースとの連携
- Webスクレイピング機能
- REST API、GraphQLのクライアント実装
- Webhook受信・送信処理
- OAuth認証実装

#### 2.1.3 コード品質保証
- エラーハンドリングの自動実装
- ログ出力機能の標準装備
- コメントによる処理説明
- 関数の適切な分割と命名
- Google Apps Scriptのベストプラクティス準拠
- 実行速度を考慮した最適化

### 2.2 画像解析機能

#### 2.2.1 スクリーンショット解析
- Excel、スプレッドシートの画面キャプチャから構造を理解
- データの列構成、型、サンプル値を自動認識
- 画像内のテーブル構造を解析してコード生成

#### 2.2.2 エラー画面診断
- エラーメッセージのスクリーンショットから原因分析
- 解決策の提示と修正コードの自動生成
- スタックトレースの解読と対処法の提案

#### 2.2.3 UIデザインからの実装
- アプリケーション画面のスクショから機能を推測
- フォーム画面から入力検証ロジックの生成
- ダッシュボード画面からデータ集計ロジックの実装

### 2.3 セッション管理機能

#### 2.3.1 会話の継続性
- 前回の会話内容を記憶し、続きから再開可能
- 作業中断しても、後日続きから作業再開
- コンテキストを保持したまま修正依頼が可能

#### 2.3.2 複数プロジェクト管理
- ユーザーごとに複数の開発プロジェクトを並行管理
- プロジェクトの切り替えがスムーズ
- 過去のプロジェクト履歴の参照

#### 2.3.3 履歴管理
- 生成したコードの完全な履歴保存
- 修正履歴のトラッキング
- 過去のやり取りからの学習機能

### 2.4 コード共有機能

#### 2.4.1 ワンクリック共有
- 生成されたコードに固有のURLを発行
- URLをクリックするだけでコード確認可能
- LINE認証不要でブラウザから閲覧

#### 2.4.2 コード表示機能
- シンタックスハイライト対応
- コピーボタンでワンクリックコピー
- 印刷用レイアウト最適化
- モバイル端末での閲覧対応

#### 2.4.3 ダウンロード機能
- プレーンテキストでのダウンロード
- Google Apps Scriptプロジェクトとしてのエクスポート
- 実装手順書のPDF出力

### 2.5 エンジニアサポート機能

#### 2.5.1 人間のエンジニアへのエスカレーション
- AI対応が困難な場合の人間エンジニアへの引き継ぎ
- エンジニアとのリアルタイムチャット
- 画面共有による詳細なサポート

#### 2.5.2 エンジニア向け管理機能
- サポート依頼の一覧管理
- 優先度に基づく対応順序の管理
- 対応履歴の記録と分析

### 2.6 プレミアムプラン機能

#### 2.6.1 無料プラン
- 月10回までのコード生成
- 基本的な機能はすべて利用可能
- 画像解析機能も利用可能

#### 2.6.2 プレミアムプラン（月額10,000円）
- 無制限のコード生成
- 優先的なAI処理（待ち時間短縮）
- 専用サポートチャンネル
- 高度なカスタマイズオプション
- コード生成履歴の無制限保存

---

## 3. ユーザー体験フロー

### 3.1 初回利用フロー

1. **LINE友だち追加**
   - QRコードまたはID検索で友だち追加
   - ウェルカムメッセージの受信
   - 初回利用ガイダンスの表示

2. **カテゴリ選択または直接入力**
   - カテゴリボタンから選択
   - または直接要望をテキスト入力
   - AIが自動でカテゴリを判定

3. **要件の詳細化**
   - AIからの質問に回答
   - 具体例の提示
   - 必要に応じて画像をアップロード

4. **コード生成**
   - 2-3分でコード生成完了
   - 結果をLINEメッセージで受信
   - 共有URLの発行

### 3.2 リピート利用フロー

1. **続きから再開**
   - 「続きから」ボタンで前回の作業を継続
   - 過去の会話履歴を参照
   - 修正や追加要望の受付

2. **新規プロジェクト開始**
   - 「最初から」で新しいプロジェクト開始
   - 過去のプロジェクトとは独立して管理
   - カテゴリ選択から再スタート

### 3.3 修正・改善フロー

1. **生成後の修正**
   - 「修正」ボタンで修正モード開始
   - 具体的な修正内容を入力
   - 修正版コードの再生成

2. **エラー対応**
   - エラー画面のスクリーンショット送信
   - AIがエラー内容を分析
   - 修正コードの自動生成

3. **機能追加**
   - 既存コードへの機能追加要望
   - 段階的な機能拡張
   - 互換性を保った実装

---

## 4. 活用シーンと事例

### 4.1 営業部門での活用

#### 売上レポート自動化
- **課題**: 毎日の売上データ集計に30分かかる
- **解決**: スプレッドシートの売上データを自動集計し、グラフ付きレポートを毎朝メール送信
- **効果**: 作業時間ゼロ、ミスゼロ、リアルタイムな経営判断が可能に

#### 見込み客管理システム
- **課題**: 見込み客の状況管理が属人化している
- **解決**: スプレッドシートとGmailを連携した自動フォローアップシステム
- **効果**: フォロー漏れゼロ、成約率20%向上

### 4.2 人事部門での活用

#### 勤怠管理自動化
- **課題**: 出退勤データの集計に毎月丸1日かかる
- **解決**: フォーム入力データを自動集計、異常値を自動検出
- **効果**: 作業時間を8時間から10分に短縮

#### 採用プロセス管理
- **課題**: 応募者への返信が遅れがち
- **解決**: 応募フォーム受信時の自動返信、面接日程の自動調整
- **効果**: 応募者体験の向上、採用担当の負荷軽減

### 4.3 経理部門での活用

#### 請求書自動生成
- **課題**: 月末の請求書作成に3日かかる
- **解決**: スプレッドシートのデータから請求書PDFを自動生成
- **効果**: 作業時間を3日から3時間に短縮

#### 経費精算チェック
- **課題**: 経費申請の内容チェックが煩雑
- **解決**: 申請内容の自動チェック、異常値の自動検出
- **効果**: チェック精度向上、不正防止

### 4.4 マーケティング部門での活用

#### メルマガ配信自動化
- **課題**: セグメント別のメール配信が手作業
- **解決**: 顧客属性に応じた自動配信システム
- **効果**: パーソナライズ化により開封率30%向上

#### アンケート集計自動化
- **課題**: アンケート結果の集計と分析に時間がかかる
- **解決**: 回答の自動集計とグラフ化、レポート生成
- **効果**: リアルタイムな顧客インサイトの取得

### 4.5 教育機関での活用

#### 成績管理システム
- **課題**: 成績データの管理が複雑
- **解決**: 複数の評価項目を自動集計、成績表を自動生成
- **効果**: 教員の事務作業時間を50%削減

#### 出欠管理自動化
- **課題**: 出欠確認と集計が手間
- **解決**: フォーム入力による出欠管理、自動集計
- **効果**: リアルタイムな出欠状況の把握

---

## 5. システムの特徴と優位性

### 5.1 技術的優位性

#### AIによる高度な要件理解
- 最新のClaude 3.5 Sonnetモデルを採用
- 日本語の自然言語処理に優れた性能
- 曖昧な要望も適切に解釈

#### 堅牢なアーキテクチャ
- マイクロサービス設計による高い拡張性
- キュー処理による安定した処理
- 自動リトライ機能による高い信頼性

#### セキュリティ対策
- LINE認証による安全なユーザー管理
- APIキーの暗号化保存
- SQLインジェクション対策
- XSS対策の実装

### 5.2 ビジネス的優位性

#### 導入の容易さ
- LINE友だち追加だけで即利用開始
- 特別なソフトウェアのインストール不要
- スマートフォンだけで完結

#### コストパフォーマンス
- 無料プランでも月10回利用可能
- プレミアムプランが月額10,000円（法人利用も想定した価格設定）
- 外注と比較して1/100以下のコスト

#### サポート体制
- AIによる24時間365日対応
- 人間のエンジニアによるサポートオプション
- 継続的な機能改善とアップデート

### 5.3 ユーザビリティ

#### 直感的な操作
- LINEの使い慣れたインターフェース
- ボタン選択による簡単操作
- テキスト入力での要件伝達

#### 多言語対応（将来実装予定）
- 英語、中国語、韓国語対応
- 多国籍企業での利用を想定

#### アクセシビリティ
- スクリーンリーダー対応
- 高コントラストモード
- 文字サイズ調整機能

---

## 6. システム運用

### 6.1 監視体制

#### パフォーマンス監視
- レスポンスタイムの常時監視
- エラー率のトラッキング
- リソース使用状況の監視

#### ユーザー行動分析
- 利用頻度の分析
- 人気機能の把握
- ボトルネックの特定

### 6.2 メンテナンス

#### 定期メンテナンス
- 毎週水曜日深夜の定期メンテナンス（5分程度）
- データベースの最適化
- ログファイルのローテーション

#### アップデート
- 月1回の機能アップデート
- セキュリティパッチの即時適用
- AIモデルの定期的な更新

### 6.3 障害対応

#### 障害検知
- 自動監視による即時検知
- ユーザーレポートの受付
- エスカレーションフロー

#### 復旧手順
- 自動フェイルオーバー
- データバックアップからの復旧
- 影響範囲の最小化

---

## 7. データ管理

### 7.1 データ保存

#### 保存期間
- 無料プラン: 3ヶ月間
- プレミアムプラン: 無制限
- 退会後: 30日間保持後削除

#### バックアップ
- 日次バックアップ
- 地理的に分散した保存
- ポイントインタイムリカバリ対応

### 7.2 プライバシー保護

#### 個人情報の取り扱い
- LINE IDのハッシュ化保存
- 最小限の情報収集
- GDPR準拠の設計

#### データの利用
- サービス改善のための統計利用
- 個別データの第三者提供なし
- オプトアウト機能の提供

### 7.3 コンプライアンス

#### 法令遵守
- 個人情報保護法準拠
- 特定商取引法準拠
- 著作権法準拠

#### 監査対応
- アクセスログの保存
- 操作履歴のトラッキング
- 定期的な外部監査

---

## 8. 今後の展開

### 8.1 機能拡張計画

#### 短期計画（3ヶ月以内）
- Google Drive連携強化
- Microsoft 365連携
- 音声入力機能の実装
- 多言語対応（英語）

#### 中期計画（6ヶ月以内）
- チーム共有機能
- テンプレートマーケットプレイス
- ビジュアルエディタ
- GitHub連携

#### 長期計画（1年以内）
- エンタープライズプラン
- オンプレミス版提供
- AI学習機能の強化
- ノーコード開発プラットフォーム化

### 8.2 市場展開

#### 国内展開
- 大企業向けエンタープライズ版
- 教育機関向けアカデミック版
- 自治体向けガバメント版

#### 海外展開
- アジア圏への展開
- 欧米市場への参入
- グローバルパートナーシップ

### 8.3 技術革新

#### AI機能の進化
- より高度な要件理解
- コード最適化の自動化
- バグの自動検出と修正

#### 統合プラットフォーム化
- 他のノーコードツールとの連携
- ワークフロー自動化機能
- ビジネスプロセス管理機能

---

## 9. 料金・決済ポリシー

### 9.1 料金体系

#### 無料プラン
- **利用回数**: 月間10回まで
- **リセット日**: 毎月1日 0:00 (JST)
- **繰り越し**: 不可（未使用分は消滅）
- **機能制限**: なし（すべての機能が利用可能）

#### プレミアムプラン
- **料金**: 月額10,000円（税込）
- **利用回数**: 無制限
- **支払方法**: クレジットカード、デビットカード
- **請求サイクル**: 月次（申込日を起算日とする）
- **自動更新**: あり（キャンセルまで継続）

#### プロフェッショナルプラン
- **料金**: 月額50,000円（税込）
- **利用回数**: 無制限
- **優先サポート**: エンジニア直接対応（24時間以内）
- **支払方法**: クレジットカード、デビットカード
- **請求サイクル**: 月次（申込日を起算日とする）
- **自動更新**: あり（キャンセルまで継続）
- **追加特典**: 複雑な要件対応、カスタムソリューション開発

### 9.2 キャンセル・返金ポリシー

#### キャンセル方法
1. LINEチャットで「キャンセル」と送信
2. 確認メッセージが表示される
3. 「はい」を選択でキャンセル完了
4. 次回更新日まで利用可能

#### 返金ポリシー
- **日割り計算**: なし（月単位での課金）
- **クーリングオフ**: 初回申込から7日間
- **返金申請方法**: メールまたはLINEで連絡
- **返金処理期間**: 申請から5営業日以内
- **返金不可のケース**: 利用回数が100回を超えた月

#### 特別割引
- **年間一括払い**: 10%割引（108,000円/年）
- **法人契約**: 5アカウント以上で20%割引
- **教育機関割引**: 30%割引（証明書必要）

---

## 10. サービスレベル契約（SLA）

### 10.1 サービス品質保証

#### 稼働率
- **目標稼働率**: 99.5%（月間99.5%の時間利用可能）
- **計画メンテナンス**: 毎週水曜日 2:00-3:00 (JST)
- **計測方法**: 5分ごとの監視チェック
- **除外事項**: 計画メンテナンス、不可抗力

#### 応答時間
- **メッセージ受信**: 1秒以内
- **コード生成開始**: 5秒以内
- **コード生成完了**: 90%が3分以内
- **画像解析**: 10秒以内

### 10.2 サポート体制

#### サポート窓口
- **無料プラン**: LINE Bot内でのAIサポートのみ
- **プレミアムプラン**:
  - AIサポート（24時間65日）
  - エンジニアサポート（平日10:00-18:00）
  - メールサポート

#### 応答時間目標
- **クリティカル**: 1時間以内
- **重大**: 4時間以内
- **中程度**: 1営業日以内
- **軽微**: 3営業日以内

### 10.3 補償

#### SLA違反時の補償
- **稼働率 99.5%未満**: 翌月料金10%返金
- **稼働率 99.0%未満**: 翌月料金25%返金
- **稼働率 95.0%未満**: 翌月料金50%返金

#### データ損失時の補償
- **コード生成履歴**: 最大30日分の復旧保証
- **セッションデータ**: 最大7日分の復旧保証
- **補償上限**: 直近3ヶ月分の利用料金

---

## 11. 利用規約・制限事項

### 11.1 利用制限

#### 禁止事項
- 違法行為を目的とした利用
- 第三者の権利を侵害する利用
- システムに過度な負荷をかける行為
- リバースエンジニアリング

#### 生成コードの制限
- 1回の生成で最大1000行まで
- 実行時間30秒以内のスクリプト
- Google Apps Scriptの制限に準拠

### 11.2 免責事項

#### サービスの保証
- ベストエフォートでのサービス提供
- 100%の可用性は保証しない
- 生成コードの完全性は保証しない

#### 損害賠償
- 直接損害のみ賠償対象
- 賠償額は利用料金を上限
- 不可抗力による免責

### 11.3 サポート範囲

#### 対応範囲
- システムの使い方サポート
- 生成コードの基本的な説明
- エラー対応のアドバイス

#### 対応範囲外
- 生成コードのカスタマイズ代行
- Google Workspace環境の構築
- プログラミング教育

---

## 12. お問い合わせ

### 12.1 サポート窓口

#### LINEサポート
- Bot内「エンジニアに相談」機能
- 営業時間: 平日10:00-18:00
- 返信目安: 1営業日以内

#### メールサポート
- プレミアム会員専用
- 優先対応
- 技術的な詳細相談可能

### 12.2 よくある質問

#### 利用開始について
- Q: 料金はいつから発生しますか？
- A: 無料プランは永続無料。プレミアムプラン申込時から課金開始。

#### コード生成について
- Q: どんなコードでも生成できますか？
- A: Google Apps Scriptで実現可能な範囲で生成可能。

#### セキュリティについて
- Q: 生成したコードは安全ですか？
- A: セキュリティベストプラクティスに準拠したコードを生成。

### 12.3 フィードバック

#### 機能要望
- LINEで「機能要望」と送信
- 定期的なユーザーアンケート
- ユーザーコミュニティでの意見交換

#### 不具合報告
- エラー画面のスクリーンショット送信
- 自動でログ収集・分析
- 24時間以内の初期対応

---

## 付録A: 用語集

### 技術用語
- **GAS (Google Apps Script)**: Googleのサービスを自動化するスクリプト言語
- **スプレッドシート**: Googleの表計算アプリケーション
- **API**: アプリケーション間でデータをやり取りする仕組み
- **Webhook**: 外部サービスからの通知を受け取る仕組み
- **トークン**: APIアクセスのための認証情報

### サービス用語
- **セッション**: 一連の会話の単位
- **コンテキスト**: 会話の文脈情報
- **プロンプト**: AIへの指示文
- **エスカレーション**: 上位サポートへの引き継ぎ

---

## 付録B: 生成コード例

### 売上集計の自動化
**要望**: 「毎日の売上データを集計して、月次レポートを作成したい」
**生成される機能**:
- 日次売上データの自動取得
- 月次での集計処理
- グラフの自動生成
- PDFレポートの作成
- 管理者へのメール送信

### 在庫管理システム
**要望**: 「在庫が少なくなったら自動で発注メールを送りたい」
**生成される機能**:
- 在庫数の監視
- 閾値判定ロジック
- 発注メールの自動生成
- 発注履歴の記録
- 在庫推移グラフの作成

### 顧客管理システム
**要望**: 「お客様の誕生日に自動でメールを送りたい」
**生成される機能**:
- 顧客データベースの参照
- 誕生日の自動チェック
- パーソナライズされたメール生成
- 送信履歴の管理
- 開封率のトラッキング

---

## 付録C: トラブルシューティング

### よくあるエラーと対処法

#### 「実行時間が長すぎます」
- 原因: 処理データが多すぎる
- 対処: バッチ処理に分割、実行間隔の調整

#### 「権限がありません」
- 原因: 必要なAPIが有効化されていない
- 対処: Google Cloudコンソールで有効化

#### 「データが見つかりません」
- 原因: シート名やセル範囲の指定ミス
- 対処: 設定値の確認と修正

### パフォーマンス改善

#### 処理速度の向上
- キャッシュの活用
- 不要なAPI呼び出しの削減
- バッチ処理の実装

#### メモリ使用量の削減
- 大量データの分割処理
- 不要な変数の削除
- ガベージコレクションの考慮

---

## 更新履歴

### Version 2.0.0 (2024年12月)
- カテゴリ自動検出機能追加
- セッション継続機能実装
- エラー解析機能強化
- UI/UX改善

### Version 1.5.0 (2024年10月)
- 画像解析機能追加
- プレミアムプラン導入
- エンジニアサポート機能追加

### Version 1.0.0 (2024年8月)
- 初回リリース
- 基本的なコード生成機能
- LINE連携機能

---

## 終わりに

GAS Generatorは、プログラミングの民主化を目指すサービスです。
専門知識がなくても、誰もが業務自動化の恩恵を受けられる世界を実現します。

継続的な改善により、より使いやすく、より強力なツールへと進化し続けます。
皆様のフィードバックを心よりお待ちしております。

---

**最終更新日**: 2024年12月17日
**ドキュメントバージョン**: 1.0.0
**著作権**: © 2024 GAS Generator. All Rights Reserved.