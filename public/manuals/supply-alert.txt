=====================================
  備品在庫アラート　使い方ガイド
=====================================

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　アクセス情報
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【フロントエンド（管理画面）】
https://bihinnzaiko.netlify.app/

【Google Apps Script（API）】
https://script.google.com/macros/s/AKfycbyLGSrT9zW4SHFDpvcGyOIo3jDwjVEhCglIJRmczGdAoJShfmvO2tPn5lolfdTEUxLkJg/exec

【スプレッドシート】
https://docs.google.com/spreadsheets/d/1PIIhrlvDadTZtC70fVRiuWMQW3i2V4RO1IG78XnphXA/edit

【フロントエンドのソースファイル】
Desktop > 備品在庫アラート > index.html, style.css, script.js


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　システム全体の流れ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ① 備品を使ったら「在庫操作」から使用数を記録
      ↓
  ② GAS（API）がスプレッドシートの在庫数を更新
      ↓
  ③ 在庫が発注点以下になるとダッシュボードにアラート表示
      ↓
  ④ 「発注管理」から発注を登録
      ↓
  ⑤ 届いたら「納品処理」→ 在庫が自動で加算される


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　ダッシュボードの見方
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【KPIカード（上部4つ）】
  ・管理品目数：登録されている備品の総数
  ・在庫切れ　：在庫が0の備品の数
  ・要発注　　：在庫が発注点以下で、まだ発注していない備品の数
  ・発注済み　：発注したけどまだ届いていない備品の数
  → 各カードをクリックすると対応する一覧にジャンプします

  ポイント：
  ・発注済みの備品はアラートや要発注のカウントから除外されます
  ・二重発注を防ぐ仕組みになっています

【アラート】
  在庫切れ・要発注の備品が表示されます。
  ※ 発注済みの備品はここに表示されません

【直近の履歴】
  最近の在庫操作が10件まで表示されます。
  クリックすると詳細（入力元・日付・記録者など）が確認できます。

【発注済みリスト】
  発注中（未納品）の備品一覧が表示されます。


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　備品を使ったとき（在庫操作）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ナビの「在庫操作」をタップ
2. 備品を選択（現在在庫と発注点が表示されます）
3. 操作種別を選択
   ・使用　　：備品を使った（在庫が減る）
   ・補充　　：手動で在庫を追加した（在庫が増える）
   ・棚卸調整：実際の在庫数に合わせる
4. 数量を入力
5. 記録者・備考を入力（任意）
6. 「記録する」をタップ

  ポイント：
  ・在庫の棚から取り出したときに入力してください
  ・補充は発注管理の納品処理とは別です
    （発注で届いた備品は「発注管理 ＞ 納品処理」で処理）
  ・記録後、フォームは自動でリセットされます


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　新しい備品を登録する（備品登録）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ナビの「備品登録」をタップ
2. 以下の項目を入力
   ・備品名（必須）
   ・カテゴリ（消耗品 / 文具 / 衛生用品 / 飲料 / その他）
   ・単位（個 / 本 / 箱 / パック など）
   ・初期在庫数
   ・発注点　　：この数以下になるとアラートが出ます
   ・適正在庫数：理想的な在庫数
   ・1回あたり発注数
   ・単価（円）
   ・リードタイム（日）：発注してから届くまでの日数
   ・主な発注先
   ・保管場所
3. 「登録する」をタップ

  ポイント：
  ・備品IDは自動で連番（ITM-011, ITM-012...）が付きます
  ・発注点の設定が重要です（アラートの基準になります）


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　発注する（発注管理）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【発注リスト（自動生成）】
  在庫が発注点以下の備品が自動で表示されます。
  ・「発注」ボタンを押すと発注登録できます
  ・発注するとリストから消えます（発注履歴で確認可能）
  ・「リスト更新」ボタンで最新の状態に更新できます

【手動で発注登録】
  発注リストにない備品を発注したいとき。
  ・備品を選択して「発注登録」をタップ

【発注登録画面（モーダル）】
  ・発注数量、発注先、担当者、備考を入力
  ・推奨発注数が自動で入ります
  ・「発注する」をタップで登録完了

  ポイント：
  ・発注しただけでは在庫は増えません
  ・届いたら必ず「納品処理」をしてください


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　届いた備品を処理する（納品処理）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ナビの「発注管理」をタップ
2. 発注履歴から「発注済」のものを探す
   ※ ステータスフィルターで「発注済」に絞り込むと便利
3. 「納品処理」ボタンをタップ
4. 納品数量を確認（発注数と違う場合は修正）
5. 担当者を入力（任意）
6. 「納品処理」をタップ

  処理されること：
  ・発注のステータスが「納品済」に変わる
  ・スプレッドシートの発注履歴に納品日が記録される
  ・備品マスタの在庫数が自動で加算される
  ・在庫履歴に補充の記録が追加される
  ・ダッシュボードのアラートから消える

【発注をキャンセルする場合】
  「キャンセル」ボタンを押すとキャンセルできます。
  ※ キャンセルすると発注リストに再表示されます


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　在庫一覧の使い方
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【検索・フィルター】
  ・備品名で検索（テキスト入力）
  ・カテゴリで絞り込み
  ・ステータスで絞り込み（在庫切れ / 要発注 / 正常）
  ・発注先で絞り込み
  ・保管場所で絞り込み

【備品の詳細】
  備品をクリックすると詳細モーダルが表示されます。
  ・基本情報（カテゴリ、単位、発注点、単価 など）
  ・直近の在庫履歴

  ポイント：
  ・在庫数の色で状態がわかります
    赤：在庫切れ（0）
    黄：要発注（発注点以下）
    緑：正常


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　履歴の見方
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【履歴ページ】
  すべての在庫操作の履歴が表示されます。
  ・種別フィルター（使用 / 補充 / 棚卸調整 / 廃棄）で絞り込み可能

【履歴の詳細】
  履歴をクリックすると詳細が表示されます。
  ・備品名
  ・種別（使用 / 補充 など）
  ・数量
  ・日付
  ・記録者
  ・入力元（どこから入力されたか）
  ・備考

【入力元の種類】
  ・在庫操作　　　　　：在庫操作ページから使用・棚卸調整した
  ・在庫操作 ＞ 補充　：在庫操作ページから手動で補充した
  ・発注管理 ＞ 納品処理：発注の納品処理で在庫が加算された
  ・備品登録 ＞ 初期登録：備品を新規登録した際の初期在庫


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　自動アラート（メール通知）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

GASのトリガーで自動通知が設定されています。

【毎日 9:00】
  在庫切れ・要発注の備品がある場合、メールで通知されます。

【毎週月曜】
  週次サマリーがメールで届きます。

【毎月1日】
  月次レポートがメールで届きます。

  ※ 通知先メールアドレスはGASの設定で変更できます


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　スプレッドシートの構成
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【備品マスタ シート】
  全備品の基本情報が入るシート。
  ・A列：備品ID（ITM-S001〜：サンプル、ITM-011〜：実データ）
  ・B列：備品名
  ・C列：カテゴリ
  ・D列：単位
  ・E列：現在在庫数
  ・F列：発注点
  ・G列：適正在庫
  ・H列：1回あたり発注数
  ・I列：単価
  ・J列：主な発注先
  ・K列：連絡先
  ・L列：リードタイム
  ・M列：保管場所
  ・N列：ステータス（管理中 / 廃止）

【在庫履歴 シート】
  すべての在庫操作の記録。
  ・使用、補充、棚卸調整、廃棄の履歴が自動で追加されます

【発注履歴 シート】
  発注の記録。
  ・A列：発注ID
  ・B列：発注日
  ・C列：備品ID
  ・D列：備品名
  ・E列：数量
  ・F列：発注先
  ・G列：金額
  ・H列：納品予定日
  ・I列：ステータス（発注済 / 納品済 / キャンセル）
  ・J列：納品日
  ・K列：担当者
  ・L列：備考

【発注リスト シート】
  発注点以下の備品の自動生成リスト。
  ※ フロントエンドの発注リスト表示に使用されます

【アラート設定 / アラートログ / 在庫サマリー シート】
  メール通知やレポート用のシートです。
  ※ 基本的に手動で触る必要はありません

  重要：
  スプレッドシートのデータを直接編集すると
  フロントエンドとの整合性が崩れる可能性があります。
  基本的にはフロントエンドから操作してください。


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　日常の運用フロー
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【備品を使ったとき】
  在庫操作 → 使用 → 数量を入力 → 記録する

【備品が届いたとき】
  発注管理 → 発注履歴の「納品処理」 → 納品数量を確認 → 処理

【ダッシュボードにアラートが出たとき】
  発注管理 → 発注リストから発注 → 実際に発注を手配

【新しい備品を管理に追加するとき】
  備品登録 → 情報を入力 → 登録する

【棚卸しのとき】
  在庫操作 → 棚卸調整 → 実在庫数を入力 → 記録する


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　トラブルシューティング
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【ダッシュボードにデータが表示されない】
  ・ブラウザをリロードしてみてください
  ・GASのデプロイが最新か確認してください

【操作してもすぐに画面に反映されない】
  ・データ書き込みに数秒かかります
  ・2〜3秒後に自動で再読み込みされます
  ・反映されない場合はページを再読み込みしてください

【発注したのにアラートに残っている】
  ・発注が正しく登録されているか発注履歴を確認
  ・ページをリロードしてみてください

【納品処理したのに在庫が増えない】
  ・スプレッドシートの備品マスタで在庫数を確認
  ・在庫履歴に補充の記録があるか確認
  ・GASのデプロイが最新バージョンか確認

【備品IDが「undefined」になっている】
  ・GASのデプロイが古いバージョンの可能性があります
  ・GASを再デプロイしてください


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　GASの再デプロイ方法
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

GASのコードを修正した場合、再デプロイが必要です。

1. GASエディタを開く
2. 右上の「デプロイ」→「デプロイを管理」
3. 既存のデプロイの右にある鉛筆アイコンをクリック
4. バージョンを「新バージョン」に変更
5. 「デプロイ」をクリック

  重要：
  ・「新しいデプロイ」ではなく「デプロイを管理」から更新！
  ・「新しいデプロイ」にするとURLが変わってしまいます
  ・URLが変わるとフロントエンド側の修正も必要になります


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　フロントエンドの再デプロイ方法（Netlify）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

フロントエンドのファイルを修正した場合：

1. Netlify（https://app.netlify.com/）にログイン
2. 対象のサイト（bihinnzaiko）を選択
3. 「Deploys」タブを開く
4. 「deploy」フォルダをドラッグ＆ドロップでアップロード
5. デプロイ完了を確認

  ※ deployフォルダにはindex.html, style.css, script.jsが入っています
  ※ ソースファイルを修正した場合はdeployフォルダにもコピーしてください

  ファイルの場所：
  Desktop > 備品在庫アラート > deploy


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
　仕組みのまとめ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【自動でやってくれること】
  ・在庫数の増減管理
  ・発注点以下のアラート表示
  ・発注リストの自動生成（発注済みは除外）
  ・納品時の在庫自動加算
  ・メールでの在庫アラート通知（毎日9:00）
  ・週次サマリー・月次レポートのメール配信
  ・備品IDの自動採番

【手動でやること】
  ・備品を使ったときの使用数入力
  ・備品が届いたときの納品処理
  ・発注リストを見て実際の発注を手配
  ・新しい備品の登録

【変更するとき気をつけること】
  ・スプレッドシートを直接編集しない（フロントから操作）
  ・GAS更新時は「新バージョン」で再デプロイ
  ・「新しいデプロイ」ではなく「デプロイを管理」から更新


=====================================
  作成日：2026年2月20日
=====================================
