# ğŸš€ GAS Generator - ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸

## ç›®æ¬¡
1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
4. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
5. [ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](#ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
6. [APIä»•æ§˜](#apiä»•æ§˜)
7. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
8. [å¤–éƒ¨é€£æº](#å¤–éƒ¨é€£æº)
9. [ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯](#ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯)
10. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
11. [ã‚¨ãƒ©ãƒ¼å‡¦ç†](#ã‚¨ãƒ©ãƒ¼å‡¦ç†)
12. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
13. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ)

---

## æ¦‚è¦

### ã‚·ã‚¹ãƒ†ãƒ å
**GAS Generator** - Google Apps Scriptè‡ªå‹•ç”ŸæˆAIãƒœãƒƒãƒˆ

### ç›®çš„
LINEçµŒç”±ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¦æœ›ã‚’å—ã‘å–ã‚Šã€Claude AIã‚’ä½¿ç”¨ã—ã¦Google Apps Scriptï¼ˆGASï¼‰ã®ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã—ã€æä¾›ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€‚

### ä¸»è¦æ©Ÿèƒ½
- ğŸ¤– è‡ªç„¶è¨€èªã§ã®å¯¾è©±å‹è¦ä»¶åé›†
- ğŸ“¸ ç”»åƒè§£æã«ã‚ˆã‚‹ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ§‹é€ èªè­˜
- ğŸ¯ ã‚«ãƒ†ã‚´ãƒªåˆ¥GASã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
- ğŸ’ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ï¼ˆStripeæ±ºæ¸ˆï¼‰
- ğŸ“Š ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ»åˆ¶é™
- ğŸ”„ éåŒæœŸå‡¦ç†ã‚­ãƒ¥ãƒ¼

### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ï½ä¸­ç´šè€…
- æ¥­å‹™åŠ¹ç‡åŒ–ã‚’æ±‚ã‚ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¦ãƒ¼ã‚¶ãƒ¼
- ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆè‡ªå‹•åŒ–ã«èˆˆå‘³ãŒã‚ã‚‹äºº

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ãƒ¦ãƒ¼ã‚¶ãƒ¼                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LINE Platform                          â”‚
â”‚  â”œâ”€ Messaging API                                           â”‚
â”‚  â””â”€ Webhook                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Next.js Application                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  API Routes Layer                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ /api/webhook (LINE Webhookå—ä¿¡)                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ /api/stripe/webhook (æ±ºæ¸ˆWebhook)               â”‚   â”‚
â”‚  â”‚  â”œâ”€ /api/cron/* (å®šæœŸå‡¦ç†)                          â”‚   â”‚
â”‚  â”‚  â””â”€ /api/admin/* (ç®¡ç†API)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               Business Logic Layer                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ Conversation Flow Manager                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ Code Generation Service                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ Image Analysis Service                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ Queue Processing Service                        â”‚   â”‚
â”‚  â”‚  â””â”€ Premium Management Service                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Data Access Layer                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ Supabase Client                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ Session Store                                   â”‚   â”‚
â”‚  â”‚  â””â”€ Cache Manager                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼             â–¼             â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase    â”‚ â”‚Claude AI â”‚ â”‚  Stripe  â”‚ â”‚Vision API    â”‚
â”‚  Database    â”‚ â”‚   API    â”‚ â”‚   API    â”‚ â”‚(Claude 3.5)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼è¨­è¨ˆ

#### 1. Presentation Layerï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰
- LINE Messaging API ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- Webhook ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- ç®¡ç†ç”¨API

#### 2. Application Layerï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰
- ä¼šè©±ãƒ•ãƒ­ãƒ¼ç®¡ç†
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ç”»åƒè§£æå‡¦ç†
- ã‚­ãƒ¥ãƒ¼ç®¡ç†

#### 3. Domain Layerï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ«ãƒ¼ãƒ«
- æ–™é‡‘è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

#### 4. Infrastructure Layerï¼ˆã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹
- å¤–éƒ¨APIé€šä¿¡
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```json
{
  "framework": "Next.js 14.0.0",
  "language": "TypeScript 5.x",
  "runtime": "Node.js 18.x",
  "styling": "Tailwind CSS (æœªä½¿ç”¨)",
  "ui": "LINE Messaging API (ãƒãƒ£ãƒƒãƒˆUI)"
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```json
{
  "api": "Next.js API Routes",
  "runtime": "Node.js (Serverless)",
  "edge": "Edge Runtime (Stripe Webhook)",
  "queue": "In-memory + Database Queue"
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
```json
{
  "primary": "Supabase (PostgreSQL)",
  "cache": "In-memory Cache",
  "session": "Memory + Database Hybrid"
}
```

### å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
```json
{
  "ai": "Anthropic Claude 3.5 Sonnet",
  "vision": "Claude 3.5 Vision API",
  "messaging": "LINE Messaging API",
  "payment": "Stripe",
  "hosting": "Vercel/Render/Railway"
}
```

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
```json
{
  "packageManager": "npm",
  "linter": "ESLint",
  "typeCheck": "TypeScript",
  "validation": "Zod",
  "build": "Next.js Build"
}
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
gas-generator/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ api/                      # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ webhook/              # LINE Webhook
â”‚   â”‚   â”œâ”€â”€ stripe/               # Stripe Webhook
â”‚   â”‚   â”œâ”€â”€ cron/                 # å®šæœŸå®Ÿè¡Œã‚¸ãƒ§ãƒ–
â”‚   â”‚   â”œâ”€â”€ admin/                # ç®¡ç†API
â”‚   â”‚   â””â”€â”€ health/               # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
â”‚   â”œâ”€â”€ layout.tsx                # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ page.tsx                  # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ lib/                          # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ claude/                   # Claude AIé–¢é€£
â”‚   â”‚   â”œâ”€â”€ client.ts             # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ prompt-builder.ts     # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
â”‚   â”‚   â”œâ”€â”€ response-parser.ts    # ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ
â”‚   â”‚   â””â”€â”€ usage-tracker.ts      # ä½¿ç”¨é‡è¿½è·¡
â”‚   â”‚
â”‚   â”œâ”€â”€ conversation/             # ä¼šè©±ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ conversational-flow.ts # ä¼šè©±ãƒ•ãƒ­ãƒ¼
â”‚   â”‚   â”œâ”€â”€ session-store.ts      # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ session-handler.ts    # ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©
â”‚   â”‚   â”œâ”€â”€ flow-manager.ts       # ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
â”‚   â”‚   â””â”€â”€ category-definitions.ts # ã‚«ãƒ†ã‚´ãƒªå®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ line/                     # LINEé–¢é€£
â”‚   â”‚   â”œâ”€â”€ client.ts             # LINE APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ message-templates.ts  # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ image-handler.ts      # ç”»åƒå‡¦ç†
â”‚   â”‚   â”œâ”€â”€ webhook-validator.ts  # Webhookæ¤œè¨¼
â”‚   â”‚   â”œâ”€â”€ engineer-support.ts   # ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚µãƒãƒ¼ãƒˆ
â”‚   â”‚   â””â”€â”€ flex-code-template.ts # Flexãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚   â”‚
â”‚   â”œâ”€â”€ vision/                   # ç”»åƒè§£æ
â”‚   â”‚   â”œâ”€â”€ rate-limiter.ts       # ãƒ¬ãƒ¼ãƒˆåˆ¶é™
â”‚   â”‚   â””â”€â”€ memory-counter.ts     # ãƒ¡ãƒ¢ãƒªã‚«ã‚¦ãƒ³ã‚¿
â”‚   â”‚
â”‚   â”œâ”€â”€ queue/                    # ã‚­ãƒ¥ãƒ¼ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ manager.ts            # ã‚­ãƒ¥ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
â”‚   â”‚   â””â”€â”€ processor.ts          # ã‚¸ãƒ§ãƒ–ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼
â”‚   â”‚
â”‚   â”œâ”€â”€ supabase/                 # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ client.ts             # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ queries.ts            # ã‚¯ã‚¨ãƒªé›†
â”‚   â”‚   â””â”€â”€ session-queries.ts    # ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ã‚¨ãƒª
â”‚   â”‚
â”‚   â”œâ”€â”€ premium/                  # ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½
â”‚   â”‚   â””â”€â”€ premium-checker.ts    # ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒã‚§ãƒƒã‚¯
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/               # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”‚   â”œâ”€â”€ rate-limiter.ts       # ãƒ¬ãƒ¼ãƒˆåˆ¶é™
â”‚   â”‚   â””â”€â”€ request-logger.ts     # ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ­ã‚°
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ logger.ts             # ãƒ­ã‚¬ãƒ¼
â”‚   â”‚   â”œâ”€â”€ errors.ts             # ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ crypto.ts             # æš—å·åŒ–
â”‚   â”‚   â”œâ”€â”€ validators.ts         # ãƒãƒªãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â””â”€â”€ memory-manager.ts     # ãƒ¡ãƒ¢ãƒªç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ monitoring/               # ç›£è¦–
â”‚   â”‚   â”œâ”€â”€ performance.ts        # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
â”‚   â”‚   â””â”€â”€ error-notifier.ts     # ã‚¨ãƒ©ãƒ¼é€šçŸ¥
â”‚   â”‚
â”‚   â””â”€â”€ constants/                # å®šæ•°
â”‚       â””â”€â”€ config.ts             # è¨­å®šå€¤
â”‚
â”œâ”€â”€ types/                        # å‹å®šç¾©
â”‚   â”œâ”€â”€ database.ts               # DBå‹å®šç¾©
â”‚   â”œâ”€â”€ claude.ts                 # Claudeå‹å®šç¾©
â”‚   â””â”€â”€ line.ts                   # LINEå‹å®šç¾©
â”‚
â”œâ”€â”€ scripts/                      # ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ seed-data.ts              # ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
â”‚
â””â”€â”€ public/                       # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
    â””â”€â”€ (ç©º)
```

---

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 1. ä¼šè©±ãƒ•ãƒ­ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

#### ConversationalFlow ã‚¯ãƒ©ã‚¹
```typescript
class ConversationalFlow {
  // è‡ªç„¶è¨€èªã§ã®å¯¾è©±çš„è¦ä»¶åé›†
  static async processConversation(
    context: ConversationContext,
    userMessage: string
  ): Promise<{
    reply: string
    isComplete: boolean
    updatedContext: ConversationContext
  }>
  
  // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®è³ªå•ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
  // AIã«ã‚ˆã‚‹å‹•çš„ãªè³ªå•ç”Ÿæˆ
  // è¦ä»¶ã®è‡ªå‹•æŠ½å‡ºã¨æ•´ç†
}
```

**ç‰¹å¾´:**
- JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹å¼·åˆ¶ã‚’å»ƒæ­¢ã—ã€è‡ªç„¶ãªå¯¾è©±ã‚’å®Ÿç¾
- `[READY_FOR_CODE]` ãƒãƒ¼ã‚«ãƒ¼ã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†
- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿æŒã«ã‚ˆã‚‹ç¶™ç¶šçš„ãªä¼šè©±

### 2. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³

#### PromptBuilder ã‚¯ãƒ©ã‚¹
```typescript
class PromptBuilder {
  // ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™ã‚’è€ƒæ…®ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
  static async buildCodeGenerationPrompt(
    request: CodeGenerationRequest
  ): Promise<string>
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®éå»å®Ÿç¸¾ã‚’è€ƒæ…®
  // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æœ€é©åŒ–
  // 800ãƒˆãƒ¼ã‚¯ãƒ³ä»¥å†…ã§ã®åŠ¹ç‡çš„ãªæŒ‡ç¤º
}
```

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹æˆ:**
1. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆå›ºå®šã€800ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ400ãƒˆãƒ¼ã‚¯ãƒ³ä»¥å†…ï¼‰
3. ã‚«ãƒ†ã‚´ãƒªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ300ãƒˆãƒ¼ã‚¯ãƒ³ä»¥å†…ï¼‰
4. ãƒªã‚¯ã‚¨ã‚¹ãƒˆè©³ç´°ï¼ˆ300ãƒˆãƒ¼ã‚¯ãƒ³ä»¥å†…ï¼‰

### 3. ç”»åƒè§£æã‚·ã‚¹ãƒ†ãƒ 

#### LineImageHandler ã‚¯ãƒ©ã‚¹
```typescript
class LineImageHandler {
  // Claude Vision APIã‚’ä½¿ç”¨ã—ãŸç”»åƒè§£æ
  async handleImageMessage(
    messageId: string,
    replyToken: string,
    userId: string
  ): Promise<{
    success: boolean
    description?: string
    error?: string
  }>
  
  // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆç„¡æ–™ï¼š3å›/æ—¥ã€ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ï¼š100å›/æ—¥ï¼‰
  // ç”»åƒãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹é‡è¤‡ãƒã‚§ãƒƒã‚¯
  // 5MBä»¥ä¸‹ã®ç”»åƒã‚µã‚¤ã‚ºåˆ¶é™
}
```

**å¯¾å¿œç”»åƒå½¢å¼:**
- JPEG, PNG, GIF, WebP
- BMP, TIFF (JPEGã«å¤‰æ›)
- HEIC, HEIF (JPEGã«å¤‰æ›)

### 4. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### ConversationSessionStore ã‚¯ãƒ©ã‚¹
```typescript
class ConversationSessionStore {
  // ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
  private static instance: ConversationSessionStore
  
  // ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆãƒ¡ãƒ¢ãƒª + DBï¼‰
  private sessions: Map<string, SessionData>
  private timerManager: TimerManager
  
  // 15åˆ†ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  // è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
}
```

**ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹:**
- `waiting_category`: ã‚«ãƒ†ã‚´ãƒªé¸æŠå¾…ã¡
- `collecting_requirements`: è¦ä»¶åé›†ä¸­
- `ready_for_generation`: ç”Ÿæˆæº–å‚™å®Œäº†
- `completed`: å®Œäº†

### 5. ã‚­ãƒ¥ãƒ¼å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ 

#### QueueManager ã‚¯ãƒ©ã‚¹
```typescript
class QueueManager {
  // éåŒæœŸã‚¸ãƒ§ãƒ–ç®¡ç†
  static async addJob(jobData: QueueJob): Promise<string>
  
  // ãƒãƒƒãƒå‡¦ç†ï¼ˆæœ€å¤§5ä»¶åŒæ™‚ï¼‰
  static async processBatch(): Promise<ProcessResult[]>
  
  // å„ªå…ˆåº¦ç®¡ç†ï¼ˆpremium > freeï¼‰
  // ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ï¼ˆæœ€å¤§3å›ï¼‰
  // ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œå‡ºã¨è§£æ±º
}
```

### 6. ãƒ¬ãƒ¼ãƒˆåˆ¶é™

#### VisionRateLimiter ã‚¯ãƒ©ã‚¹
```typescript
class VisionRateLimiter {
  // Mutexã«ã‚ˆã‚‹ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³å¯¾ç­–
  private mutex = new Mutex()
  private memoryCounter = MemoryUsageCounter.getInstance()
  
  // åˆ¶é™è¨­å®š
  FREE: { daily: 3, monthly: 20 }
  PREMIUM: { daily: 100, monthly: 1500 }
  
  // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ä½œæˆã§ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½
}
```

---

## APIä»•æ§˜

### 1. LINE Webhook ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### POST `/api/webhook`
LINEã‹ã‚‰ã®Webhookã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ãƒ»å‡¦ç†

**Headers:**
```
x-line-signature: [ç½²å]
Content-Type: application/json
```

**Request Body:**
```json
{
  "destination": "U...",
  "events": [{
    "type": "message",
    "message": {
      "type": "text",
      "text": "ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’è‡ªå‹•åŒ–ã—ãŸã„"
    },
    "source": {
      "userId": "U[32æ–‡å­—ã®16é€²æ•°]",
      "type": "user"
    },
    "replyToken": "...",
    "timestamp": 1234567890
  }]
}
```

**Response:**
```json
{
  "success": true,
  "processedEvents": 1
}
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼:**
1. ç½²åæ¤œè¨¼
2. ã‚¤ãƒ™ãƒ³ãƒˆé‡è¤‡ãƒã‚§ãƒƒã‚¯
3. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ/æ›´æ–°
5. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
6. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—åˆ¥å‡¦ç†
   - ãƒ†ã‚­ã‚¹ãƒˆ: ä¼šè©±ãƒ•ãƒ­ãƒ¼å‡¦ç†
   - ç”»åƒ: Vision APIè§£æ
   - ãƒ•ã‚¡ã‚¤ãƒ«: å½¢å¼ãƒã‚§ãƒƒã‚¯

### 2. Stripe Webhook

#### POST `/api/stripe/webhook`
Stripeæ±ºæ¸ˆã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†

**Runtime:** Edge Runtimeï¼ˆé«˜é€Ÿå‡¦ç†ï¼‰

**ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—:**
- `checkout.session.completed`: æ±ºæ¸ˆå®Œäº†
- `customer.subscription.created`: ã‚µãƒ–ã‚¹ã‚¯é–‹å§‹
- `customer.subscription.updated`: ã‚µãƒ–ã‚¹ã‚¯æ›´æ–°
- `customer.subscription.deleted`: ã‚µãƒ–ã‚¹ã‚¯è§£ç´„
- `charge.refunded`: è¿”é‡‘å‡¦ç†

**å†ªç­‰æ€§ä¿è¨¼:**
- ã‚¤ãƒ™ãƒ³ãƒˆIDã«ã‚ˆã‚‹é‡è¤‡ãƒã‚§ãƒƒã‚¯
- å‡¦ç†æ¸ˆã¿ãƒ•ãƒ©ã‚°ç®¡ç†

### 3. å®šæœŸå®Ÿè¡Œã‚¸ãƒ§ãƒ–

#### GET `/api/cron/cleanup`
å¤ã„ãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**å®Ÿè¡Œé »åº¦:** æ¯æ—¥åˆå‰3æ™‚ï¼ˆJSTï¼‰

**å‡¦ç†å†…å®¹:**
- 7æ—¥ä»¥ä¸Šå‰ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å‰Šé™¤
- 30æ—¥ä»¥ä¸Šå‰ã®ãƒ­ã‚°å‰Šé™¤
- å®Œäº†æ¸ˆã¿ã‚­ãƒ¥ãƒ¼ã®å‰Šé™¤

#### GET `/api/cron/process-queue`
ã‚­ãƒ¥ãƒ¼å‡¦ç†ã®å®Ÿè¡Œ

**å®Ÿè¡Œé »åº¦:** 1åˆ†ã”ã¨

**å‡¦ç†å†…å®¹:**
- å¾…æ©Ÿä¸­ã‚¸ãƒ§ãƒ–ã®å–å¾—ï¼ˆæœ€å¤§5ä»¶ï¼‰
- ä¸¦åˆ—å‡¦ç†å®Ÿè¡Œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤

### 4. ç®¡ç†API

#### GET `/api/admin/vision-stats`
ç”»åƒè§£æã®çµ±è¨ˆæƒ…å ±å–å¾—

**Response:**
```json
{
  "daily": {
    "total": 150,
    "free": 30,
    "premium": 120
  },
  "monthly": {
    "total": 3500,
    "revenue": 45000
  },
  "topUsers": [...]
}
```

### 5. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

#### GET `/api/health`
ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ…‹ã®ç¢ºèª

**Response:**
```json
{
  "status": "healthy",
  "timestamp": "2025-09-09T12:00:00Z",
  "services": {
    "database": "connected",
    "claude": "available",
    "line": "active"
  }
}
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

#### 1. users ãƒ†ãƒ¼ãƒ–ãƒ«
ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç®¡ç†

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  line_user_id VARCHAR(255) UNIQUE,
  display_name VARCHAR(255),
  skill_level VARCHAR(50) DEFAULT 'beginner',
  subscription_status VARCHAR(50) DEFAULT 'free',
  subscription_end_date TIMESTAMP,
  stripe_customer_id VARCHAR(255),
  monthly_usage_count INT DEFAULT 0,
  total_requests INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  last_active_at TIMESTAMP DEFAULT NOW()
);
```

#### 2. sessions ãƒ†ãƒ¼ãƒ–ãƒ«
ä¼šè©±ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

```sql
CREATE TABLE sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  status VARCHAR(50) DEFAULT 'active',
  step_data JSONB,
  category VARCHAR(100),
  subcategory VARCHAR(100),
  requirements JSONB,
  started_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  completed_at TIMESTAMP
);
```

#### 3. generated_codes ãƒ†ãƒ¼ãƒ–ãƒ«
ç”Ÿæˆã‚³ãƒ¼ãƒ‰å±¥æ­´

```sql
CREATE TABLE generated_codes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  session_id UUID REFERENCES sessions(id),
  code TEXT NOT NULL,
  gas_url TEXT,
  category VARCHAR(100),
  subcategory VARCHAR(100),
  requirements JSONB,
  quality_score FLOAT,
  user_feedback VARCHAR(50),
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 4. vision_usage ãƒ†ãƒ¼ãƒ–ãƒ«
ç”»åƒè§£æä½¿ç”¨å±¥æ­´

```sql
CREATE TABLE vision_usage (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id VARCHAR(255) NOT NULL,
  image_hash VARCHAR(64),
  analysis_result TEXT,
  status VARCHAR(50) DEFAULT 'processing',
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW(),
  INDEX idx_user_created (user_id, created_at),
  INDEX idx_hash_status (image_hash, status)
);
```

#### 5. generation_queue ãƒ†ãƒ¼ãƒ–ãƒ«
éåŒæœŸå‡¦ç†ã‚­ãƒ¥ãƒ¼

```sql
CREATE TABLE generation_queue (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id VARCHAR(255) NOT NULL,
  job_type VARCHAR(50) NOT NULL,
  payload JSONB NOT NULL,
  status VARCHAR(50) DEFAULT 'pending',
  priority INT DEFAULT 1,
  retry_count INT DEFAULT 0,
  max_retries INT DEFAULT 3,
  error_message TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  processed_at TIMESTAMP,
  completed_at TIMESTAMP,
  INDEX idx_status_priority (status, priority DESC, created_at)
);
```

#### 6. stripe_events ãƒ†ãƒ¼ãƒ–ãƒ«
Stripe ã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´

```sql
CREATE TABLE stripe_events (
  id VARCHAR(255) PRIMARY KEY,
  type VARCHAR(100) NOT NULL,
  data JSONB NOT NULL,
  processed BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW(),
  processed_at TIMESTAMP
);
```

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `users.line_user_id`: ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆé«˜é€Ÿæ¤œç´¢ï¼‰
- `sessions.user_id + status`: è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- `vision_usage.user_id + created_at`: æ—¥æ¬¡é›†è¨ˆç”¨
- `generation_queue.status + priority`: ã‚­ãƒ¥ãƒ¼å‡¦ç†ç”¨

---

## å¤–éƒ¨é€£æº

### 1. LINE Messaging API

#### æ¥ç¶šè¨­å®š
```typescript
{
  channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN,
  channelSecret: process.env.LINE_CHANNEL_SECRET
}
```

#### ä¸»è¦æ©Ÿèƒ½
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡**: Reply API / Push API
- **ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼**: ã‚«ãƒ†ã‚´ãƒªé¸æŠUI
- **Flexãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºç”¨ã‚«ãƒ¼ãƒ‰
- **ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ—ãƒ©ã‚¤**: é¸æŠè‚¢æç¤º

#### ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- Reply: ç„¡åˆ¶é™ï¼ˆ30ç§’ä»¥å†…ï¼‰
- Push: 500é€š/åˆ†
- Multicast: 500å®›å…ˆ/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

### 2. Anthropic Claude API

#### ãƒ¢ãƒ‡ãƒ«è¨­å®š
```typescript
{
  model: 'claude-3-5-sonnet-20241022',
  maxTokens: 4000,
  temperature: 0.7
}
```

#### ä½¿ç”¨ç”¨é€”
- **ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ**: GASã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
- **Vision API**: ç”»åƒè§£æï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆèªè­˜ï¼‰
- **ä¼šè©±AI**: è‡ªç„¶ãªå¯¾è©±ã§ã®è¦ä»¶åé›†

#### ã‚³ã‚¹ãƒˆç®¡ç†
- Input: $0.003 / 1Kãƒˆãƒ¼ã‚¯ãƒ³
- Output: $0.015 / 1Kãƒˆãƒ¼ã‚¯ãƒ³
- Vision: ç´„$0.02 / ç”»åƒ

### 3. Stripe API

#### æ–™é‡‘ãƒ—ãƒ©ãƒ³
```typescript
{
  free: {
    price: 0,
    limits: {
      dailyGeneration: 3,
      monthlyGeneration: 20,
      imageAnalysis: 3
    }
  },
  premium: {
    price: 1500, // å††
    limits: {
      dailyGeneration: ç„¡åˆ¶é™,
      monthlyGeneration: ç„¡åˆ¶é™,
      imageAnalysis: 100
    }
  }
}
```

#### æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼
1. Checkout Sessionä½œæˆ
2. æ±ºæ¸ˆãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
3. Webhookå—ä¿¡
4. ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æœ‰åŠ¹åŒ–

### 4. Supabase

#### æ¥ç¶šè¨­å®š
```typescript
{
  url: process.env.NEXT_PUBLIC_SUPABASE_URL,
  anonKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,
  serviceRoleKey: process.env.SUPABASE_SERVICE_ROLE_KEY
}
```

#### æ©Ÿèƒ½åˆ©ç”¨
- **Database**: PostgreSQL
- **Auth**: æœªä½¿ç”¨ï¼ˆLINEèªè¨¼ã‚’ä½¿ç”¨ï¼‰
- **Storage**: æœªä½¿ç”¨
- **Realtime**: æœªä½¿ç”¨

---

## ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

### 1. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸] --> B{ã‚«ãƒ†ã‚´ãƒªé¸æŠæ¸ˆã¿?}
    B -->|No| C[ã‚«ãƒ†ã‚´ãƒªé¸æŠUIè¡¨ç¤º]
    B -->|Yes| D[ä¼šè©±çš„è¦ä»¶åé›†]
    D --> E{è¦ä»¶ååˆ†?}
    E -->|No| D
    E -->|Yes| F[ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
    F --> G{æ‰¿èª?}
    G -->|No| H[ä¿®æ­£å—ä»˜]
    G -->|Yes| I[ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ]
    I --> J[Claude APIå‘¼ã³å‡ºã—]
    J --> K[ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ]
    K --> L[å“è³ªãƒã‚§ãƒƒã‚¯]
    L --> M[Flexãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ]
    M --> N[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸é€ä¿¡]
```

### 2. ã‚«ãƒ†ã‚´ãƒªåˆ¥å‡¦ç†

#### ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ“ä½œ
- ãƒ‡ãƒ¼ã‚¿é›†è¨ˆãƒ»åˆ†æ
- è‡ªå‹•è»¢è¨˜ãƒ»æ•´å½¢
- ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- ã‚°ãƒ©ãƒ•ä½œæˆ

#### Gmailé€£æº
- è‡ªå‹•è¿”ä¿¡
- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†
- ãƒ¡ãƒ¼ãƒ«è»¢é€
- å®šæœŸé€ä¿¡

#### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº
- äºˆå®šè‡ªå‹•ä½œæˆ
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š
- å‚åŠ è€…ç®¡ç†
- å®šæœŸäºˆå®šè¨­å®š

#### APIé€£æº
- Slacké€šçŸ¥
- LINEé€šçŸ¥
- å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿å–å¾—
- Webhookå‡¦ç†

### 3. æ–™é‡‘è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

#### ç„¡æ–™ãƒ—ãƒ©ãƒ³åˆ¶é™
```typescript
const FREE_LIMITS = {
  daily: {
    generation: 3,
    imageAnalysis: 3
  },
  monthly: {
    generation: 20,
    imageAnalysis: 20
  }
}
```

#### ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰¹å…¸
- ç„¡åˆ¶é™ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
- å„ªå…ˆå‡¦ç†ã‚­ãƒ¥ãƒ¼
- ç”»åƒè§£æ100å›/æ—¥
- ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚µãƒãƒ¼ãƒˆ

### 4. å“è³ªã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°

```typescript
interface QualityMetrics {
  hasErrorHandling: boolean      // try-catchå®Ÿè£…
  hasComments: boolean            // ã‚³ãƒ¡ãƒ³ãƒˆè¨˜è¼‰
  hasLogging: boolean             // ãƒ­ã‚°å‡ºåŠ›
  isEfficient: boolean            // åŠ¹ç‡çš„ãªå®Ÿè£…
  followsBestPractices: boolean   // ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹æº–æ‹ 
}

// ã‚¹ã‚³ã‚¢è¨ˆç®—ï¼ˆ0-100ï¼‰
const calculateScore = (metrics: QualityMetrics): number => {
  let score = 0
  if (metrics.hasErrorHandling) score += 25
  if (metrics.hasComments) score += 20
  if (metrics.hasLogging) score += 15
  if (metrics.isEfficient) score += 20
  if (metrics.followsBestPractices) score += 20
  return score
}
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### 1. èªè¨¼ãƒ»èªå¯

#### LINEç½²åæ¤œè¨¼
```typescript
async function validateLineSignature(
  body: string, 
  signature: string
): Promise<boolean> {
  const channelSecret = process.env.LINE_CHANNEL_SECRET
  const expectedSignature = crypto
    .createHmac('SHA256', channelSecret)
    .update(body)
    .digest('base64')
  return timingSafeEqual(signature, expectedSignature)
}
```

#### Stripe Webhookæ¤œè¨¼
```typescript
stripe.webhooks.constructEvent(
  rawBody,
  signature,
  webhookSecret
)
```

### 2. ãƒ¬ãƒ¼ãƒˆåˆ¶é™

#### å®Ÿè£…æ–¹å¼
- **Mutex**: ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³å¯¾ç­–
- **Token Bucket**: APIãƒ¬ãƒ¼ãƒˆåˆ¶é™
- **Sliding Window**: æ™‚é–“çª“åˆ¶é™

#### åˆ¶é™è¨­å®š
```typescript
const RATE_LIMITS = {
  api: {
    webhook: '100/minute',
    generation: '10/minute',
    imageAnalysis: '5/minute'
  },
  user: {
    free: '3/day',
    premium: '100/day'
  }
}
```

### 3. ãƒ‡ãƒ¼ã‚¿ä¿è­·

#### æš—å·åŒ–
- **é€šä¿¡**: HTTPS/TLS 1.3
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabaseæš—å·åŒ–
- **API Key**: ç’°å¢ƒå¤‰æ•°ç®¡ç†

#### å€‹äººæƒ…å ±ç®¡ç†
- LINE User IDã®ã¿ä¿å­˜
- å®Ÿåãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹éä¿å­˜
- GDPR/å€‹äººæƒ…å ±ä¿è­·æ³•æº–æ‹ 

### 4. ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–

#### SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³
```typescript
// Supabase Prepared Statementsä½¿ç”¨
supabaseAdmin
  .from('users')
  .select('*')
  .eq('line_user_id', userId) // è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
```

#### ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³
```typescript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º
function sanitizeUserInput(input: string): string {
  return input
    .replace(/[<>]/g, '')
    .replace(/javascript:/gi, '')
    .substring(0, 2000)
}
```

### 5. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®‰å…¨æ€§

```typescript
// æœ¬ç•ªç’°å¢ƒã§ã¯è©³ç´°ã‚’éš è”½
export function getSafeErrorMessage(error: unknown): string {
  if (process.env.NODE_ENV === 'development') {
    return error.message
  }
  
  // æ±ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿”å´
  return 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'
}
```

---

## ã‚¨ãƒ©ãƒ¼å‡¦ç†

### 1. ã‚¨ãƒ©ãƒ¼éšå±¤

```typescript
BaseError
â”œâ”€â”€ ValidationError (400)
â”œâ”€â”€ AuthenticationError (401)
â”œâ”€â”€ AuthorizationError (403)
â”œâ”€â”€ NotFoundError (404)
â”œâ”€â”€ RateLimitError (429)
â”œâ”€â”€ ConfigurationError (500)
â”œâ”€â”€ ExternalServiceError (502)
â””â”€â”€ DatabaseError (500)
```

### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©
```typescript
process.on('uncaughtException', (error) => {
  logger.critical('Uncaught exception', { error })
  // Graceful shutdown
})

process.on('unhandledRejection', (reason) => {
  logger.critical('Unhandled rejection', { reason })
})
```

#### API ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
catch (error) {
  const handled = handleError(error)
  
  return NextResponse.json(
    {
      error: getSafeErrorMessage(error),
      code: handled.code
    },
    { status: handled.statusCode }
  )
}
```

### 3. ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥

```typescript
class RetryHandler {
  async withRetry<T>(
    fn: () => Promise<T>,
    options: {
      maxAttempts: 3,
      delay: 1000,
      backoff: 2,
      retryOn: [NetworkError, TimeoutError]
    }
  ): Promise<T>
}
```

### 4. ã‚¨ãƒ©ãƒ¼é€šçŸ¥

```typescript
class ErrorNotifier {
  // é‡è¦åº¦åˆ¥é€šçŸ¥
  severity: {
    low: 'ãƒ­ã‚°ã®ã¿',
    medium: 'ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨˜éŒ²',
    high: 'ç®¡ç†è€…é€šçŸ¥',
    critical: 'å³æ™‚ã‚¢ãƒ©ãƒ¼ãƒˆ'
  }
  
  // é€šçŸ¥ãƒãƒ£ãƒãƒ«
  channels: ['console', 'database', 'line_admin']
}
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

#### ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
```typescript
class CacheManager {
  private cache = new Map<string, CacheEntry>()
  
  strategies: {
    'conversation-sessions': { ttl: 900000 },  // 15åˆ†
    'user-data': { ttl: 3600000 },            // 1æ™‚é–“
    'generated-codes': { ttl: 86400000 }      // 24æ™‚é–“
  }
}
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ã‚»ãƒƒã‚·ãƒ§ãƒ³: 15åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±: 1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ç”Ÿæˆã‚³ãƒ¼ãƒ‰: 24æ™‚é–“ä¿æŒ

### 2. éåŒæœŸå‡¦ç†

#### ã‚­ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
```typescript
class QueueProcessor {
  // ãƒãƒƒãƒå‡¦ç†
  batchSize: 5
  
  // ä¸¦åˆ—å®Ÿè¡Œ
  concurrency: 3
  
  // å„ªå…ˆåº¦ç®¡ç†
  priority: ['premium', 'normal', 'low']
}
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

#### ã‚¯ã‚¨ãƒªæœ€é©åŒ–
```typescript
// N+1å•é¡Œã®å›é¿
const users = await supabase
  .from('users')
  .select(`
    *,
    sessions (
      *,
      generated_codes (*)
    )
  `)
  .limit(100)
```

#### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ´»ç”¨
- è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½¿ç”¨
- éƒ¨åˆ†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é©ç”¨
- ã‚«ãƒãƒªãƒ³ã‚°ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

### 4. ãƒ¡ãƒ¢ãƒªç®¡ç†

#### ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
```typescript
class MemoryManager {
  // å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  cleanupInterval: 300000  // 5åˆ†
  
  // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–
  threshold: 0.8  // 80%ã§è­¦å‘Š
  
  // è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
  maxMemory: 400  // MB
}
```

### 5. ãƒ¬ã‚¹ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
```typescript
// å¤§ããªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®åˆ†å‰²é€ä¿¡
const stream = new ReadableStream({
  async start(controller) {
    for await (const chunk of generateCode()) {
      controller.enqueue(chunk)
    }
    controller.close()
  }
})
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### 1. ç’°å¢ƒå¤‰æ•°

#### å¿…é ˆç’°å¢ƒå¤‰æ•°
```env
# LINE
LINE_CHANNEL_ACCESS_TOKEN=
LINE_CHANNEL_SECRET=

# Anthropic
ANTHROPIC_API_KEY=

# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Stripe
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Application
NODE_ENV=production
WEBHOOK_SECRET=
```

### 2. ãƒ“ãƒ«ãƒ‰è¨­å®š

#### Next.jsè¨­å®š
```javascript
// next.config.js
module.exports = {
  experimental: {
    serverActions: true
  },
  images: {
    domains: ['profile.line-scdn.net']
  }
}
```

#### TypeScriptè¨­å®š
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "esnext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true
  }
}
```

### 3. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

#### Vercel
```yaml
Build Command: npm run build
Output Directory: .next
Install Command: npm install
```

#### Render
```yaml
Build Command: npm install && npm run build
Start Command: npm start
Health Check Path: /api/health
```

#### Railway
```yaml
Builder: Nixpacks
Start Command: npm start
Health Check: /api/health
```

### 4. æœ¬ç•ªç’°å¢ƒè€ƒæ…®äº‹é …

#### ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å¯¾å¿œ
- ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹è¨­è¨ˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³å¤–éƒ¨åŒ–

#### ç›£è¦–
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè£…
- ã‚¨ãƒ©ãƒ¼è¿½è·¡
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹

#### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ã‚³ãƒ¼ãƒ‰å±¥æ­´30æ—¥ä¿æŒ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### 5. CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```yaml
# GitHub Actionsä¾‹
name: Deploy
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
      - run: npm ci
      - run: npm run build
      - run: npm run test
      - run: vercel --prod
```

---

## é‹ç”¨ãƒ»ä¿å®ˆ

### 1. ç›£è¦–é …ç›®

#### ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- CPUä½¿ç”¨ç‡
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 
- ã‚¨ãƒ©ãƒ¼ç‡

#### ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- DAU/MAU
- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ•°
- èª²é‡‘ç‡
- é›¢è„±ç‡

### 2. ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

```typescript
const ALERT_THRESHOLDS = {
  errorRate: 0.01,       // 1%
  responseTime: 3000,    // 3ç§’
  memoryUsage: 0.8,      // 80%
  queueSize: 100         // 100ä»¶
}
```

### 3. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

#### å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒé©ç”¨
- ä¾å­˜é–¢ä¿‚æ›´æ–°
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
- ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

#### ç·Šæ€¥å¯¾å¿œ
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œãƒ•ãƒ­ãƒ¼
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †
- ãƒ‡ãƒ¼ã‚¿ãƒªã‚«ãƒãƒªæ‰‹é †

### 4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†

- APIä»•æ§˜æ›¸
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸
- é‹ç”¨æ‰‹é †æ›¸
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

---

## ã¾ã¨ã‚

GAS Generatorã¯ã€LINEã‚’é€šã˜ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨è‡ªç„¶ãªå¯¾è©±ã‚’è¡Œã„ãªãŒã‚‰ã€Google Apps Scriptã®ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹é©æ–°çš„ãªã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

### æŠ€è¡“çš„ç‰¹å¾´
- ğŸ—ï¸ **ãƒ¢ãƒ€ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Next.js 14 + TypeScript
- ğŸ¤– **AIé§†å‹•**: Claude 3.5 Sonnet
- ğŸ“Š **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«**: Serverless + Edge Runtime
- ğŸ”’ **ã‚»ã‚­ãƒ¥ã‚¢**: å¤šå±¤é˜²å¾¡ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âš¡ **é«˜æ€§èƒ½**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ + éåŒæœŸå‡¦ç†

### ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
- ğŸ’° **åç›ŠåŒ–**: Stripeã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
- ğŸ“ˆ **æˆé•·æ€§**: æ©Ÿèƒ½æ‹¡å¼µå®¹æ˜“
- ğŸ¯ **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: è‡ªç„¶ãªå¯¾è©±UI
- ğŸ”„ **è‡ªå‹•åŒ–**: æ¥­å‹™åŠ¹ç‡åŒ–æ”¯æ´

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€æŠ€è¡“çš„ã«å …ç‰¢ã§ã‚ã‚ŠãªãŒã‚‰ã€ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚‚æº€ãŸã™å®Œæˆåº¦ã®é«˜ã„ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãªã£ã¦ã„ã¾ã™ã€‚

---

*æœ€çµ‚æ›´æ–°: 2025å¹´9æœˆ9æ—¥*
*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0.0*