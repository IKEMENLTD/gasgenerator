# 📱 LINE リッチメニュー設定ガイド

このガイドでは、GAS GeneratorのLINE Botにリッチメニュー（常時表示されるメニュー）を設定する方法を説明します。

## 📋 目次
1. [リッチメニューとは](#リッチメニューとは)
2. [メニューデザイン](#メニューデザイン)
3. [設定手順](#設定手順)
4. [画像の作成](#画像の作成)
5. [LINE Official Account Managerでの設定](#line-official-account-managerでの設定)
6. [トラブルシューティング](#トラブルシューティング)

## リッチメニューとは

リッチメニューは、LINE トーク画面の下部に常時表示されるメニューです。
ユーザーは毎回メッセージを入力することなく、ワンタップで機能にアクセスできます。

### メリット
- ✅ 常に表示されているため、ユーザーが迷わない
- ✅ ワンタップで機能にアクセス可能
- ✅ ビジュアルで直感的な操作が可能
- ✅ エンジニア相談を常に利用可能

## メニューデザイン

### 推奨レイアウト（6分割）

```
┌─────────────┬─────────────┬─────────────┐
│             │             │             │
│   📊        │   📧        │   📅        │
│ スプレッド  │   Gmail     │ カレンダー  │
│  シート     │   自動化    │   連携      │
│             │             │             │
├─────────────┼─────────────┼─────────────┤
│             │             │             │
│   🔗        │   👨‍💻        │   📖        │
│   API       │ エンジニア  │  使い方     │
│   連携      │   相談      │  ガイド     │
│             │             │             │
└─────────────┴─────────────┴─────────────┘
```

### メニュー項目と対応アクション

| アイコン | ラベル | アクションテキスト |
|---------|--------|------------------|
| 📊 | スプレッドシート | `スプレッドシート操作` |
| 📧 | Gmail自動化 | `Gmail自動化` |
| 📅 | カレンダー連携 | `カレンダー連携` |
| 🔗 | API連携 | `API連携` |
| 👨‍💻 | エンジニア相談 | `エンジニアに相談する` |
| 📖 | 使い方ガイド | `使い方を教えて` |

## 設定手順

### 前提条件
- LINE Official Account Manager へのアクセス権限
- 画像編集ツール（Canva、Figma、PowerPointなど）
- リッチメニュー用画像（2500x1686px または 2500x843px）

## 画像の作成

### 1. 画像サイズの選択

#### フルサイズ（推奨）
- **サイズ**: 2500 x 1686 px
- **用途**: 画面の約半分を占有、6つのボタンを配置

#### ハーフサイズ
- **サイズ**: 2500 x 843 px
- **用途**: 画面の約1/4を占有、3つのボタンを配置

### 2. デザインツールでの作成

#### Canvaを使用する場合

1. [Canva](https://www.canva.com)にアクセス
2. カスタムサイズで新規作成
   - 幅: 2500px
   - 高さ: 1686px
3. 6分割グリッドを作成
4. 各エリアにアイコンとテキストを配置

#### デザインのポイント

```css
/* 推奨カラースキーム */
背景色: #FFFFFF または #F7F7F7
メインカラー: #06C755 (LINE緑)
テキスト色: #333333
境界線: #E0E0E0

/* フォントサイズ（目安） */
アイコン: 120-150px
メインテキスト: 60-80px
サブテキスト: 40-50px
```

### 3. 画像のエクスポート

- **形式**: PNG または JPG
- **品質**: 高品質（圧縮率80%以上）
- **ファイルサイズ**: 1MB以下

## LINE Official Account Managerでの設定

### ステップ1: ログイン

1. [LINE Official Account Manager](https://manager.line.biz/)にアクセス
2. GAS GeneratorのBotアカウントでログイン

### ステップ2: リッチメニューの作成

1. 左メニューから「ホーム」→「リッチメニュー」を選択
2. 「作成」ボタンをクリック

### ステップ3: 基本設定

```yaml
タイトル: GAS Generator メニュー
表示期間: 
  開始: 即日
  終了: 無期限
メニューバーのテキスト: メニューを開く
メニューのデフォルト表示: ON
```

### ステップ4: コンテンツ設定

#### テンプレートの選択
1. 「テンプレートを選択」をクリック
2. 「6分割（2×3）」を選択

#### 画像のアップロード
1. 「画像をアップロード」をクリック
2. 作成した2500×1686pxの画像を選択
3. アップロード完了を確認

### ステップ5: アクション設定

各エリアに以下のアクションを設定：

#### エリアA（左上）
```
タイプ: テキスト
テキスト: スプレッドシート操作
```

#### エリアB（中央上）
```
タイプ: テキスト
テキスト: Gmail自動化
```

#### エリアC（右上）
```
タイプ: テキスト
テキスト: カレンダー連携
```

#### エリアD（左下）
```
タイプ: テキスト
テキスト: API連携
```

#### エリアE（中央下）⭐重要
```
タイプ: テキスト
テキスト: エンジニアに相談する
```

#### エリアF（右下）
```
タイプ: テキスト
テキスト: 使い方を教えて
```

### ステップ6: 保存と公開

1. 「保存」ボタンをクリック
2. プレビューで動作確認
3. 問題なければ「公開」をクリック

## 動作確認

### 1. スマートフォンでの確認

1. LINEアプリを開く
2. GAS Generatorとのトーク画面を開く
3. 画面下部にリッチメニューが表示されることを確認

### 2. 各ボタンの動作テスト

各ボタンをタップして、正しいメッセージが送信されることを確認：

- 📊 → 「スプレッドシート操作」が送信
- 📧 → 「Gmail自動化」が送信
- 📅 → 「カレンダー連携」が送信
- 🔗 → 「API連携」が送信
- 👨‍💻 → 「エンジニアに相談する」が送信
- 📖 → 「使い方を教えて」が送信

## トラブルシューティング

### リッチメニューが表示されない

#### 確認事項
- [ ] リッチメニューが「公開」状態になっている
- [ ] メニューのデフォルト表示が「ON」になっている
- [ ] 表示期間が正しく設定されている
- [ ] ユーザーがブロックしていない

#### 解決方法
1. LINE Official Account Managerで設定を再確認
2. 一度非公開にして再度公開
3. LINEアプリを再起動

### 画像が正しく表示されない

#### 確認事項
- [ ] 画像サイズが2500×1686px（または2500×843px）
- [ ] ファイルサイズが1MB以下
- [ ] 画像形式がPNGまたはJPG

#### 解決方法
1. 画像を再作成して正しいサイズにリサイズ
2. 画像を圧縮してファイルサイズを削減
3. 別の画像形式で保存し直す

### ボタンをタップしても反応しない

#### 確認事項
- [ ] アクション設定が正しく保存されている
- [ ] テキストアクションが正確に入力されている
- [ ] Webhookが正常に動作している

#### 解決方法
1. 各エリアのアクション設定を再確認
2. テキストをコピー＆ペーストで正確に入力
3. Renderのログでエラーを確認

## 高度な設定

### 複数のリッチメニューを使い分ける

#### ユーザー属性別メニュー
```javascript
// 例: 有料会員用と無料会員用のメニューを切り替え
if (isPaidUser) {
  // 有料会員用リッチメニューID
  await lineClient.linkRichMenuToUser(userId, 'richmenu-xxxxx')
} else {
  // 無料会員用リッチメニューID
  await lineClient.linkRichMenuToUser(userId, 'richmenu-yyyyy')
}
```

### リッチメニューAPI活用

#### リッチメニュー作成API
```bash
curl -X POST https://api.line.me/v2/bot/richmenu \
  -H 'Authorization: Bearer {channel_access_token}' \
  -H 'Content-Type: application/json' \
  -d '{
    "size": {
      "width": 2500,
      "height": 1686
    },
    "selected": true,
    "name": "GAS Generator Menu",
    "chatBarText": "メニューを開く",
    "areas": [
      {
        "bounds": {
          "x": 0,
          "y": 0,
          "width": 833,
          "height": 843
        },
        "action": {
          "type": "message",
          "text": "スプレッドシート操作"
        }
      }
      // ... 他のエリア
    ]
  }'
```

## ベストプラクティス

### 1. デザインの統一性
- ブランドカラーを使用
- アイコンスタイルを統一
- フォントを統一

### 2. ユーザビリティ
- タップ領域を十分に確保（最小44×44px）
- コントラストを確保（WCAG AA基準）
- 直感的なアイコンを使用

### 3. メンテナンス
- 定期的に利用状況を分析
- ユーザーフィードバックを収集
- 必要に応じてメニュー項目を更新

## 参考リンク

- [LINE Developers - リッチメニュー](https://developers.line.biz/ja/docs/messaging-api/using-rich-menus/)
- [LINE Official Account Manager](https://manager.line.biz/)
- [Canva - カスタムサイズ作成](https://www.canva.com/create/custom-size/)
- [リッチメニュー画像作成ツール](https://richmenu-designer.line.biz/)

## サポート

設定で困った場合は：
1. このドキュメントのトラブルシューティングを確認
2. Renderのログでエラーを確認
3. エンジニアサポートに連絡（LINE内で「エンジニアに相談する」）

---

最終更新: 2025/09/09
バージョン: 1.0.0