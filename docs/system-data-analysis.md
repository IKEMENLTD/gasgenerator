# システムデータ構造分析レポート

**作成日**: 2026-02-16
**目的**: AI相談機能のプロンプト設計のためのデータ構造分析

---

## 1. 現状データ構造

### システム数
- **合計**: 39システム
- **ID範囲**: '01'〜'40'（ID '15' 欠番）

### フィールド構成

```typescript
interface System {
  id: string                    // '01'〜'40' (2文字固定)
  name: string                  // システム名（10-20文字）
  tagline: string               // 短い説明（15-30文字）
  description: string           // 詳細説明（80-200文字）← 最も長い
  tags: string[]                // タグ配列（3-5個、各5-15文字）
  previewUrl: string            // URL（30-70文字）
  iframeAllowed: boolean        // iframe許可フラグ
  spreadsheetUrl: string        // Google Sheets URL（0-120文字）
  manualUrl: string             // マニュアルURL（0-100文字）
}
```

### トークン推定（39システム全体）

| フィールド | 文字数（平均） | トークン（平均） | 合計トークン |
|-----------|--------------|----------------|-------------|
| id | 2 | 1 | 39 |
| name | 15 | 4 | 156 |
| tagline | 25 | 7 | 273 |
| description | 150 | 40 | **1,560** |
| tags (4個) | 40 | 10 | 390 |
| previewUrl | 50 | 13 | 507 |
| spreadsheetUrl | 60 | 15 | 585 |
| manualUrl | 50 | 13 | 507 |
| **合計** | - | - | **4,017トークン** |

**問題**: description (1,560トークン) が最大のボトルネック

---

## 2. カテゴリ分類（39システム）

### ① 営業・顧客管理系（8システム）
- 01: 営業日報システム
- 02: 失客アラートシステム
- 04: リピート促進メールシステム
- 05: 口コミ依頼自動化システム
- 06: 客単価分析＋アップセル提案
- 09: LTV（顧客生涯価値）計算
- 10: 離脱顧客掘り起こし
- 29: 解約理由分析

**業種適合度**:
- 飲食業: ★★★★★（リピート促進、口コミ）
- 小売業: ★★★★★（客単価、LTV）
- サービス業: ★★★★☆（失客アラート、解約分析）

### ② 期限・納期管理系（4システム）
- 03: 期限管理システム
- 07: 納期アラートシステム
- 11: 有効期限管理（資格・免許）
- 19: 契約更新リマインド

**業種適合度**:
- 士業: ★★★★★（期限管理）
- 建設業: ★★★★★（納期管理）
- 製造業: ★★★★☆（契約更新）

### ③ 在庫・発注系（2システム）
- 31: 在庫回転率管理
- 40: 材料・消耗品管理

**業種適合度**:
- 小売業: ★★★★★
- 飲食業: ★★★★★
- 製造業: ★★★★☆

### ④ 分析・レポート系（4システム）
- 13: 価格テストA/B管理
- 14: キャンペーン効果測定
- 32: 時間帯別売上分析
- 36: 季節変動予測

**業種適合度**:
- EC/小売業: ★★★★★（価格テスト、時間帯分析）
- マーケティング: ★★★★★（キャンペーン効果測定）

### ⑤ バックオフィス系（11システム）
- 16: 経費精算ワークフロー
- 17: 請求書自動生成＋送付
- 18: 売上日報自動集計
- 22: 価格表・見積基準管理
- 24: 勤怠集計→給与計算連携
- 25: 承認フロー強制
- 26: 入金消込チェッカー
- 27: 引継ぎチェックリスト
- 33: 業務マニュアル管理
- 37: 顧問契約管理
- 38: 書類テンプレート管理

**業種適合度**:
- 全業種: ★★★★★（経費精算、勤怠、承認フロー）
- BtoB企業: ★★★★★（請求書、入金消込）

### ⑥ コミュニケーション・会議系（2システム）
- 20: 定例MTGアジェンダ自動収集
- 28: 定型連絡の自動送信

**業種適合度**:
- 全業種: ★★★★☆

### ⑦ 人事・組織管理系（3システム）
- 30: シフト希望収集→自動調整
- 34: オンボーディング進捗管理
- 35: 試用期間管理

**業種適合度**:
- 飲食業: ★★★★★（シフト管理）
- サービス業: ★★★★★（シフト管理）
- 成長企業: ★★★★☆（オンボーディング）

### ⑧ その他ツール（5システム）
- 08: 必須タスクチェックリスト
- 12: 紹介プログラム完全管理
- 21: ダブルブッキング防止（予約）
- 23: 議事録→タスク自動抽出
- 39: 案件別工数管理

**業種適合度**:
- 予約型ビジネス: ★★★★★（ダブルブッキング防止）
- プロジェクト型: ★★★★★（工数管理）

---

## 3. 圧縮戦略（目標: 7000トークン以内）

### 方針A: フィールド削減
削除するフィールド:
- ❌ `previewUrl` (507トークン削減)
- ❌ `spreadsheetUrl` (585トークン削減)
- ❌ `manualUrl` (507トークン削減)
- ❌ `iframeAllowed` (39トークン削減)

**削減効果**: 1,638トークン → 残り 2,379トークン

### 方針B: Description短縮（最重要）
現在: 平均150文字（40トークン/システム） = 1,560トークン
目標: 平均30文字（8トークン/システム） = 312トークン

**短縮例**:
- Before: "Netlify + GAS構成の営業日報管理システム。Soft UIデザインでスマホ対応。週報・月報を自動生成し、チーム全体の営業活動を可視化します。"（78文字）
- After: "日報入力・週報月報自動生成・チーム活動可視化"（23文字）

**削減効果**: 1,248トークン削減 → 残り 1,131トークン

### 方針C: Tags 簡略化
現在: 平均4タグ × 10文字 = 390トークン
目標: 平均2タグ × 8文字 = 156トークン

**削減効果**: 234トークン削減 → 残り 897トークン

### 圧縮後データ構造

```typescript
interface CompressedSystem {
  id: string           // '01'〜'40'
  name: string         // システム名（変更なし）
  summary: string      // tagline + 短縮description（30文字以内）
  tags: string[]       // 2タグに削減
  category: string     // カテゴリ追加（①〜⑧）
}
```

### 圧縮後トークン推定

| フィールド | トークン（平均） | 合計トークン |
|-----------|----------------|-------------|
| id | 1 | 39 |
| name | 4 | 156 |
| summary | 8 | 312 |
| tags (2個) | 4 | 156 |
| category | 3 | 117 |
| **合計** | 20 | **780トークン** |

**JSON構造オーバーヘッド（括弧・カンマ等）**: +200トークン
**最終推定**: **980トークン**（目標7000トークンに対して十分余裕）

---

## 4. 業種別キーワードマッピング

| 業種 | 主要課題 | 推薦システム（優先度順） |
|------|---------|------------------------|
| **小売業** | 在庫管理 | 31 → 40 → 32 → 06 → 13 |
| | 顧客管理 | 02 → 09 → 10 → 04 → 05 |
| **飲食業** | 顧客リピート | 04 → 05 → 02 → 09 → 10 |
| | シフト管理 | 30 → 24 → 32 |
| **サービス業** | 予約管理 | 21 → 03 → 07 |
| | 顧客管理 | 02 → 04 → 09 → 10 |
| **士業** | 期限管理 | 03 → 19 → 11 |
| | 書類管理 | 38 → 33 → 27 |
| **建設業** | 納期管理 | 07 → 03 → 08 |
| | 案件管理 | 39 → 07 → 08 |
| **EC/通販** | 在庫管理 | 31 → 40 → 36 |
| | 価格最適化 | 13 → 22 → 06 |
| **BtoB企業** | 請求管理 | 17 → 26 → 19 |
| | 経費精算 | 16 → 25 → 18 |
| **IT企業** | 工数管理 | 39 → 23 → 08 |
| | 人事管理 | 34 → 35 → 30 |

---

## 5. 月間時間削減効果の推定ロジック

### システムカテゴリ別削減時間

| カテゴリ | 推定削減時間（月） | 根拠 |
|---------|------------------|------|
| 営業・顧客管理系 | 20-40時間 | 手動リスト作成・メール送信の自動化 |
| 期限・納期管理系 | 10-20時間 | Excel管理→自動アラート |
| 在庫・発注系 | 30-60時間 | 棚卸・発注計算の自動化 |
| 分析・レポート系 | 15-30時間 | Excel集計作業の削減 |
| バックオフィス系 | 20-50時間 | 経費・勤怠・請求書の紙作業削減 |
| シフト管理系 | 10-25時間 | シフト作成の手作業削減 |
| 工数管理系 | 15-30時間 | Excel入力・集計の自動化 |

### 計算式（Claude プロンプトで使用）
```
推定削減時間 = システムの基本削減時間 × (1 + 従業員数補正) × 課題深刻度補正

- 従業員数補正: 10名未満=1.0, 10-50名=1.2, 50名以上=1.5
- 課題深刻度補正: 低=0.8, 中=1.0, 高=1.3
```

---

## 6. プロンプト設計への示唆

### 推薦ロジックの優先順位
1. **業種適合度**（40%）: 業種キーワードマッチ
2. **課題解決度**（30%）: 課題業務に直結するシステム
3. **ROI（時間削減効果）**（20%）: 月間顧客数・削減希望時間から算出
4. **予算適合度**（10%）: 予算感とシステム規模の適合

### Few-shot Examples設計
質問パターン:
- 業種: 小売業
- 課題: 在庫管理
- 月間顧客数: 500
- 削減希望時間: 40時間
- 予算感: 月額5万

期待される推薦:
1. **在庫回転率管理** (ID: 31) - priority: 1
   - 理由: 小売業で在庫管理に課題 → 直接的な解決
   - 削減効果: 月40時間（棚卸・発注作業の自動化）

2. **材料・消耗品管理** (ID: 40) - priority: 2
   - 理由: 在庫管理の補完システム
   - 削減効果: 月20時間

3. **客単価分析＋アップセル提案** (ID: 06) - priority: 3
   - 理由: 在庫最適化 + 売上向上のシナジー
   - 削減効果: 月15時間（分析作業）

---

## 7. 実装時の注意点

### データ抽出
```typescript
// app/systems/catalog/page.tsx からインポート
import { systems } from '@/app/systems/catalog/page'

// または直接コピーして圧縮処理
const compressedSystems = systems.map(s => ({
  id: s.id,
  name: s.name,
  summary: `${s.tagline}`, // taglineをそのまま使用
  tags: s.tags.slice(0, 2), // 最初の2タグのみ
  category: getCategoryById(s.id) // ID範囲からカテゴリ判定
}))
```

### カテゴリ判定ロジック
```typescript
function getCategoryById(id: string): string {
  const idNum = parseInt(id)
  if ([1,2,4,5,6,9,10,29].includes(idNum)) return '営業・顧客管理'
  if ([3,7,11,19].includes(idNum)) return '期限・納期管理'
  if ([31,40].includes(idNum)) return '在庫・発注'
  if ([13,14,32,36].includes(idNum)) return '分析・レポート'
  if ([16,17,18,22,24,25,26,27,33,37,38].includes(idNum)) return 'バックオフィス'
  if ([20,28].includes(idNum)) return 'コミュニケーション'
  if ([30,34,35].includes(idNum)) return '人事・組織管理'
  return 'その他ツール'
}
```

---

## まとめ

✅ **39システムのデータ構造を完全把握**
✅ **圧縮戦略確立**（4,017トークン → 980トークン）
✅ **カテゴリ分類完了**（8カテゴリ）
✅ **業種別推薦ロジック設計**
✅ **時間削減効果の推定式作成**

**次のステップ**: Task #3（AI Prompt作成）で、この分析結果を元にClaude APIのシステムプロンプトを設計する。
